nunja
=====

A minimum framework for building reuseable templates for consumption by
Python backends and JavaScript frontends.

.. image:: https://travis-ci.org/calmjs/nunja.svg?branch=master
    :target: https://travis-ci.org/calmjs/nunja
.. image:: https://ci.appveyor.com/api/projects/status/mfg7t8y4anh5futf/branch/master?svg=true
    :target: https://ci.appveyor.com/project/metatoaster/nunja/branch/master
.. image:: https://coveralls.io/repos/github/calmjs/nunja/badge.svg?branch=master
    :target: https://coveralls.io/github/calmjs/nunja?branch=master

Features
--------

``nunja`` is a framework that offers developers a way to build templates
in Jinja that can be easily used from within Python and from the web
browser using JavaScript for the frontend user facing UI components.
This is achieved by making use of Jinja2 templates that can be rendered
using `Jinja2`_ for the Python side, and the `Nunjucks`_ JavaScript
package for the rendering on the client side.

The package leverages upon the |calmjs|_ framework for the management of
access to Jinja templates with associated JavaScript front-end libraries
embedded inside Python packages.

.. _Jinja2: http://jinja.pocoo.org/
.. _Nunjucks: http://mozilla.github.io/nunjucks/
.. |calmjs| replace:: ``calmjs``
.. |nunja| replace:: ``nunja``
.. _calmjs: https://pypi.python.org/pypi/calmjs


Installation
------------

Currently under development; to begin, please clone this repository
first.  Before the installation, please have |calmjs| installed first so
that when ``python setup.py develop`` is executed at the root of this
package's repository, the appropriate metadata files defined by the
Calmjs framework will also be installed.  Failing that, |calmjs| should
also be installed automatically through ``setuptools``, however the egg-
info metadata will need to be regenerated by running ``python setup.py
egg_info``.


Troubleshooting
---------------

Using ``--bundle-map-method=empty`` with the ``rjs`` tool will result in
this error message

.. code:: sh

    $ calmjs rjs nunja --bundle-map-method=empty

    Tracing dependencies for: /tmp/nunja/nunja.testing.js
    Error: TypeError: Cannot read property 'normalize' of undefined
        at Object.<anonymous> (/tmp/nunja/node_modules/requirejs/bin/r.js:1221:35)

This is caused by the provided templates done through the ``text``
plugin which is not being provided.  To work around this, either ensure
the templates registries are NOT provided, or apply the optional advice
nunja[slim] to precompile the template and not include the raw source
template strings.  Alternatively, if the ``text`` module is to be made
available through a different artifact bundle for a given deployment,
the ``--empty`` flag may be employed to stub out the missing modules
completely, i.e.:

.. code:: sh

    $ calmjs rjs --empty nunja --bundle-map-method=empty


Contribute
----------

- Issue Tracker: https://github.com/calmjs/nunja/issues
- Source Code: https://github.com/calmjs/nunja


Legal
-----

The |nunja| package is part of the calmjs project.

The calmjs project is copyright (c) 2016 Auckland Bioengineering
Institute, University of Auckland.  |nunja| is licensed under the terms
of the GPLv2 or later.
